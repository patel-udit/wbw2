<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Wolf Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fff; /* White background */
            color: #1a202c; /* Dark text for contrast */
        }
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 1rem;
        }
        .wolf-image {
            max-width: 40%;
            height: auto;
            transition: transform 0.5s ease-in-out;
        }
        .pulse {
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        @keyframes meat-animation {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }
            100% {
                transform: translate(-100px, 0);
                opacity: 0;
            }
        }
        .meat-image {
            position: absolute;
            width: 50px;
            height: 50px;
            animation: meat-animation 0.8s ease-out;
        }
        @media (min-width: 768px) {
            .container {
                flex-direction: row;
                align-items: flex-start;
                justify-content: center;
            }
        }
    </style>
</head>
<body class="bg-white text-gray-900">

    <div class="container">
        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col items-center">
            <!-- Main title -->
            <h1 class="text-4xl md:text-6xl font-bold mb-4 text-blue-900">Project Wolf</h1>
            
            <!-- Wolf Display Area with Hunger Bar -->
            <div class="flex items-end justify-center w-full max-w-xl md:max-w-2xl mb-8">
                <!-- Hunger Bar -->
                <div class="relative w-12 h-64 bg-gray-200 rounded-full overflow-hidden shadow-inner mr-8">
                    <div id="hunger-bar-fill" class="absolute bottom-0 w-full rounded-full transition-all duration-500 ease-in-out" style="height: 0%;"></div>
                </div>
                <!-- Wolf Image -->
                <div id="wolf-display" class="relative">
                    <img id="wolf-image" src="./wolf-image.jpg" alt="A cartoon wolf mascot wearing a hard hat and a safety vest" class="wolf-image mx-auto">
                </div>
            </div>

            <!-- Time Range & Goal -->
            <div class="mt-8 p-4 bg-gray-100 rounded-xl shadow-lg border-2 border-gray-300">
                <p id="time-range" class="text-xl md:text-2xl font-semibold mb-2">2:00 - 3:00</p>
                <p class="text-lg md:text-xl font-medium">Goal: <span class="font-bold">1200</span></p>
            </div>

            <!-- Hunger State and Counter -->
            <div class="flex flex-col md:flex-row items-center justify-center gap-4 w-full mt-4">
                <div id="hunger-state-box" class="p-4 bg-gray-100 rounded-xl shadow-lg border-2 border-gray-300">
                    <p class="text-xl md:text-2xl font-semibold">Hunger State:</p>
                    <p id="hunger-state" class="text-3xl md:text-4xl font-extrabold">Starving</p>
                </div>
                <div id="box-counter-box" class="p-4 bg-gray-100 rounded-xl shadow-lg border-2 border-gray-300">
                    <p class="text-xl md:text-2xl font-semibold">Boxes Processed:</p>
                    <p id="box-counter" class="text-3xl md:text-4xl font-extrabold">0</p>
                </div>
            </div>

            <!-- Buttons for Demo -->
            <div class="mt-8 flex flex-col sm:flex-row gap-4">
                <button id="process-box" class="px-6 py-3 bg-yellow-500 text-gray-900 font-bold rounded-full shadow-lg hover:bg-yellow-400 transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-yellow-500 focus:ring-opacity-50">
                    Process a Box
                </button>
                <button id="reset-counter" class="px-6 py-3 bg-gray-700 text-white font-bold rounded-full shadow-lg hover:bg-gray-600 transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-gray-700 focus:ring-opacity-50">
                    Reset
                </button>
            </div>
        </div>

        <!-- Hourly Report Section -->
        <div id="hourly-report-container" class="mt-8 md:mt-0 p-4 bg-gray-100 rounded-xl shadow-lg border-2 border-gray-300 md:ml-8 w-full md:w-1/3">
            <h2 class="text-2xl font-bold mb-4">Hourly Report</h2>
            <div id="hourly-reports" class="space-y-2 text-left">
                <p class="p-2 bg-white rounded-lg shadow">00:00 - 01:00 processed <span class="font-bold text-green-600">1346</span> cartons</p>
                <p class="p-2 bg-white rounded-lg shadow">01:00 - 02:00 processed <span class="font-bold text-red-600">1149</span> cartons</p>
                <p class="p-2 bg-white rounded-lg shadow">02:00 - 03:00 processed <span class="font-bold text-yellow-500">0</span> cartons</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const processButton = document.getElementById('process-box');
            const resetButton = document.getElementById('reset-counter');
            const boxCounterElement = document.getElementById('box-counter');
            const hungerStateElement = document.getElementById('hunger-state');
            const wolfImage = document.getElementById('wolf-image');
            const hungerStateBox = document.getElementById('hunger-state-box');
            const boxCounterBox = document.getElementById('box-counter-box');
            const hourlyReportsElement = document.getElementById('hourly-reports');
            const hungerBarFill = document.getElementById('hunger-bar-fill');

            let boxCounter = 1185;
            const goal = 1200;

            // Define colors for each state
            const stateColors = {
                'Starving': { border: 'border-yellow-500', text: 'text-yellow-500', bar: 'bg-yellow-500' },
                'Hungry': { border: 'border-orange-500', text: 'text-orange-500', bar: 'bg-orange-500' },
                'Almost Full': { border: 'border-green-500', text: 'text-green-500', bar: 'bg-green-500' },
                'Full & Happy!': { border: 'border-emerald-600', text: 'text-emerald-600', bar: 'bg-emerald-600' }
            };

            const updateDisplay = () => {
                boxCounterElement.textContent = boxCounter;
                let state;

                if (boxCounter >= 0 && boxCounter <= 500) {
                    state = 'Starving';
                } else if (boxCounter > 500 && boxCounter <= 1000) {
                    state = 'Hungry';
                } else if (boxCounter > 1000 && boxCounter < goal) {
                    state = 'Almost Full';
                } else {
                    state = 'Full & Happy!';
                }

                hungerStateElement.textContent = state;
                
                // Update border and text colors based on state
                const colors = stateColors[state];
                hungerStateBox.className = `p-4 bg-gray-100 rounded-xl shadow-lg border-2 ${colors.border}`;
                boxCounterBox.className = `p-4 bg-gray-100 rounded-xl shadow-lg border-2 ${colors.border}`;
                hungerStateElement.className = `text-3xl md:text-4xl font-extrabold ${colors.text}`;
                boxCounterElement.className = `text-3xl md:text-4xl font-extrabold ${colors.text}`;
                
                // Update hourly report for current hour
                const currentReport = hourlyReportsElement.querySelector('p:last-child');
                currentReport.innerHTML = `02:00 - 03:00 processed <span class="font-bold ${boxCounter >= goal ? 'text-green-600' : 'text-yellow-500'}">${boxCounter}</span> cartons`;
                
                // Update hunger bar fill
                const fillPercentage = Math.min(Math.round((boxCounter / goal) * 100), 100);
                hungerBarFill.style.height = `${fillPercentage}%`;
                hungerBarFill.className = `absolute bottom-0 w-full rounded-full transition-all duration-500 ease-in-out ${colors.bar}`;
                
                // Add pulse animation when goal is reached
                if (state === 'Full & Happy!') {
                    wolfImage.classList.add('pulse');
                } else {
                    wolfImage.classList.remove('pulse');
                }
            };
            
            const createMeatImage = () => {
                const meatImage = document.createElement('img');
                meatImage.setAttribute("class", "meat-image");
                meatImage.setAttribute("src", "/meat-image.jpg");
                meatImage.setAttribute("alt", "Piece of meat");
                return meatImage;
            };

            processButton.addEventListener('click', () => {
                boxCounter++;
                updateDisplay();

                const meat = createMeatImage();
                const wolfRect = wolfImage.getBoundingClientRect();
                
                // Position the meat starting from a random point on the right
                const startX = wolfRect.right + Math.random() * 50;
                const startY = wolfRect.top + wolfRect.height / 2 + (Math.random() - 0.5) * wolfRect.height / 2;
                meat.style.left = `${startX}px`;
                meat.style.top = `${startY}px`;

                document.body.appendChild(meat);

                // Animate the meat to the wolf's mouth
                const animation = meat.animate([
                    { transform: `translate(0, 0)`, opacity: 1 },
                    { transform: `translate(${wolfRect.left - startX + 50}px, ${wolfRect.top - startY + 50}px)`, opacity: 0 }
                ], {
                    duration: 800,
                    easing: 'ease-out'
                });

                animation.onfinish = () => {
                    meat.remove();
                };
            });

            resetButton.addEventListener('click', () => {
                boxCounter = 0;
                updateDisplay();
                wolfImage.classList.remove('pulse');
            });

            // Initial display update
            updateDisplay();
        });
    </script>
</body>
</html>
